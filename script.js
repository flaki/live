!function(){var a=/\blang(?:uage)?-(?!\*)(\w+)\b/i,b=self.Prism={util:{type:function(a){return Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1]},clone:function(a){var c=b.util.type(a);switch(c){case"Object":var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]=b.util.clone(a[e]));return d;case"Array":return a.slice()}return a}},languages:{extend:function(a,c){var d=b.util.clone(b.languages[a]);for(var e in c)d[e]=c[e];return d},insertBefore:function(a,c,d,e){e=e||b.languages;var f=e[a],g={};for(var h in f)if(f.hasOwnProperty(h)){if(h==c)for(var i in d)d.hasOwnProperty(i)&&(g[i]=d[i]);g[h]=f[h]}return e[a]=g},DFS:function(a,c){for(var d in a)c.call(a,d,a[d]),"Object"===b.util.type(a)&&b.languages.DFS(a[d],c)}},highlightAll:function(a,c){for(var d,e=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),f=0;d=e[f++];)b.highlightElement(d,a===!0,c)},highlightElement:function(d,e,f){for(var g,h,i=d;i&&!a.test(i.className);)i=i.parentNode;if(i&&(g=(i.className.match(a)||[,""])[1],h=b.languages[g]),h){d.className=d.className.replace(a,"").replace(/\s+/g," ")+" language-"+g,i=d.parentNode,/pre/i.test(i.nodeName)&&(i.className=i.className.replace(a,"").replace(/\s+/g," ")+" language-"+g);var j=d.textContent;if(j){j=j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var k={element:d,language:g,grammar:h,code:j};if(b.hooks.run("before-highlight",k),e&&self.Worker){var l=new Worker(b.filename);l.onmessage=function(a){k.highlightedCode=c.stringify(JSON.parse(a.data),g),b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(k.element),b.hooks.run("after-highlight",k)},l.postMessage(JSON.stringify({language:k.language,code:k.code}))}else k.highlightedCode=b.highlight(k.code,k.grammar,k.language),b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(d),b.hooks.run("after-highlight",k)}}},highlight:function(a,d,e){return c.stringify(b.tokenize(a,d),e)},tokenize:function(a,c){var d=b.Token,e=[a],f=c.rest;if(f){for(var g in f)c[g]=f[g];delete c.rest}a:for(var g in c)if(c.hasOwnProperty(g)&&c[g]){var h=c[g],i=h.inside,j=!!h.lookbehind,k=0;h=h.pattern||h;for(var l=0;l<e.length;l++){var m=e[l];if(e.length>a.length)break a;if(!(m instanceof d)){h.lastIndex=0;var n=h.exec(m);if(n){j&&(k=n[1].length);var o=n.index-1+k,n=n[0].slice(k),p=n.length,q=o+p,r=m.slice(0,o+1),s=m.slice(q+1),t=[l,1];r&&t.push(r);var u=new d(g,i?b.tokenize(n,i):n);t.push(u),s&&t.push(s),Array.prototype.splice.apply(e,t)}}}}return e},hooks:{all:{},add:function(a,c){var d=b.hooks.all;d[a]=d[a]||[],d[a].push(c)},run:function(a,c){var d=b.hooks.all[a];if(d&&d.length)for(var e,f=0;e=d[f++];)e(c)}}},c=b.Token=function(a,b){this.type=a,this.content=b};if(c.stringify=function(a,d,e){if("string"==typeof a)return a;if("[object Array]"==Object.prototype.toString.call(a))return a.map(function(b){return c.stringify(b,d,a)}).join("");var f={type:a.type,content:c.stringify(a.content,d,e),tag:"span",classes:["token",a.type],attributes:{},language:d,parent:e};"comment"==f.type&&(f.attributes.spellcheck="true"),b.hooks.run("wrap",f);var g="";for(var h in f.attributes)g+=h+'="'+(f.attributes[h]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+g+">"+f.content+"</"+f.tag+">"},!self.document)return void self.addEventListener("message",function(a){var c=JSON.parse(a.data),d=c.language,e=c.code;self.postMessage(JSON.stringify(b.tokenize(e,b.languages[d]))),self.close()},!1);var d=document.getElementsByTagName("script");d=d[d.length-1],d&&(b.filename=d.src,document.addEventListener&&!d.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",b.highlightAll))}(),Prism.languages.markup={comment:/&lt;!--[\w\W]*?-->/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi},Prism.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))}),Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/gi,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g},Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}}),Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/gi,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/gi,inside:{punctuation:/\(/}},number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),window.Modernizr=function(a,b,c){function d(a){n.cssText=a}function e(a,b){return typeof a===b}var f,g,h,i="2.6.2",j={},k=b.documentElement,l="modernizr",m=b.createElement(l),n=m.style,o=({}.toString,{}),p=[],q=p.slice,r={}.hasOwnProperty;h=e(r,"undefined")||e(r.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return r.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=q.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(q.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(q.call(arguments)))};return d}),o.audio=function(){var a=b.createElement("audio"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(d){}return c};for(var s in o)h(o,s)&&(g=s.toLowerCase(),j[g]=o[s](),p.push((j[g]?"":"no-")+g));return j.addTest=function(a,b){if("object"==typeof a)for(var d in a)h(a,d)&&j.addTest(d,a[d]);else{if(a=a.toLowerCase(),j[a]!==c)return j;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(k.className+=" "+(b?"":"no-")+a),j[a]=b}return j},d(""),m=f=null,j._version=i,j}(this,this.document),!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b:a.fluidvids=b()}(this,function(){"use strict";var a={selector:["iframe"],players:["www.youtube.com","player.vimeo.com"]},b=[".fluidvids {","width: 100%; max-width: 100%; position: relative;","}",".fluidvids-item {","position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;","}"].join(""),c=document.head||document.getElementsByTagName("head")[0],d=function(b){return new RegExp("^(https?:)?//(?:"+a.players.join("|")+").*$","i").test(b)},e=function(a,b){return parseInt(a,10)/parseInt(b,10)*100+"%"},f=function(a){if(d(a.src)&&!a.getAttribute("data-fluidvids")){var b=document.createElement("div");a.parentNode.insertBefore(b,a),a.className+=(a.className?" ":"")+"fluidvids-item",a.setAttribute("data-fluidvids","loaded"),b.className+="fluidvids",b.style.paddingTop=e(a.height,a.width),b.appendChild(a)}},g=function(){var a=document.createElement("div");a.innerHTML="<p>x</p><style>"+b+"</style>",c.appendChild(a.childNodes[1])};return a.render=function(){for(var b=document.querySelectorAll(a.selector.join()),c=b.length;c--;)f(b[c])},a.init=function(b){for(var c in b)a[c]=b[c];a.render(),g()},a}),function(){function a(){var a=moment().add(x.extraTime);a.clone().diff(y)<0?b():a.clone().diff(z)<0?c():a.clone().diff(v)<0?d():a.clone().diff(B)<0?e():a.clone().diff(A)<0?f():g()}function b(){h("before")&&(k(),i("Catch We Build LIVE"),n(),m(),l(),D.setAttribute("data-state","before")),q("full")}function c(){h("pre")&&(m(),i("Catch We Build LIVE"),n(),j("radio",!0),D.setAttribute("data-state","pre")),q("full")}function d(){h("countdown")&&(m(),i("Starting"),n(),j("live",!0),D.setAttribute("data-state","countdown")),q("short")}function e(){h("during-live")&&(m(),i("We are LIVE now!"),o("join us in the chat"),j("live",!0),D.setAttribute("data-state","during-live"))}function f(){r("live",function(){h("during-live")&&(m(),i("We are LIVE now!"),o("join us in the chat"),j("live",!0),D.setAttribute("data-state","during-live"))},function(){h("during-radio")&&(i("We just ended!"),o("continue to join us in the chat"),j("radio",!0),D.setAttribute("data-state","during-radio"))})}function g(){h("after")&&(m(),k(),p(),i("We Build LIVE ended!"),o("next episode coming soon"),D.setAttribute("data-state","after"))}function h(a){return D.getAttribute("data-state")!=a}function i(a){var b=document.getElementById("liveHeading");null===b&&(b=document.createElement("h3"),b.setAttribute("id","liveHeading"),b.setAttribute("class","important"),D.appendChild(b)),b.innerHTML=a}function j(a,b){var c=document.getElementById("liveAudio");if(null===c&&(c=document.createElement("audio"),c.setAttribute("class","liveaudio"),c.setAttribute("id","liveAudio"),c.setAttribute("controls","controls"),D.appendChild(c)),Modernizr.audio.mp3||(a+="-ogg",console.log("Because FF is *&!%@%!$@ we're using ogg now.. Happy?? ")),c.src!==x.streamingServerName+a&&c.setAttribute("src",x.streamingServerName+a),b&&c.play(),x.usingiFrameIRC){var d=document.getElementById("liveChat");null===d&&(d=document.createElement("iframe"),d.setAttribute("id","liveChat"),d.setAttribute("class","livechat"),d.setAttribute("src","http://webchat.freenode.net?channels=webuildsg&uio=MT1mYWxzZSY5PXRydWUmMTE9NTEfe"),D.appendChild(d))}}function k(){var a=document.getElementById("liveAudio");null!==a&&D.removeChild(a);var b=document.getElementById("liveChat");null!==b&&D.removeChild(b)}function l(){var a=document.createElement("p");a.setAttribute("id","liveTime"),a.setAttribute("class","podcastTime"),a.innerHTML=v.format("D MMM YYYY, ddd @h:mm a Z")+" GMT",D.appendChild(a)}function m(){var a=document.getElementById("liveTime");null!==a&&D.removeChild(a)}function n(){var a=document.getElementById("liveCountdown");if(null===a){var b=document.createElement("p");b.setAttribute("class","countdown"),b.setAttribute("id","liveCountdown"),D.appendChild(b)}}function o(a){n();var b=document.getElementById("liveCountdown");b.innerHTML=a}function p(){var a=document.getElementById("liveCountdown");null!==a&&D.removeChild(a)}function q(a){var b,c=moment().add(x.extraTime);w=v.clone(),ms=w.diff(c,"milliseconds",!0),days=Math.floor(moment.duration(ms).asDays()),w.subtract(days,"days"),ms=w.diff(c,"milliseconds",!0),hours=Math.floor(moment.duration(ms).asHours()),w.subtract(hours,"hours"),ms=w.diff(c,"milliseconds",!0),minutes=Math.floor(moment.duration(ms).asMinutes()),w.subtract(minutes,"minutes"),ms=w.diff(c,"milliseconds",!0),seconds=Math.floor(moment.duration(ms).asSeconds()),diff="short"==a?"in <strong> "+seconds+"</strong>...":"in <strong>"+days+"</strong> days <strong>"+hours+"</strong> hr <strong>"+minutes+"</strong> min <strong>"+seconds+"</strong> s",b=document.getElementById("liveCountdown"),b.innerHTML=diff}function r(a,b,c){if(Modernizr.audio.mp3||(station+="-ogg"),u)if(u.src!=x.streamingServerName+a)u.src=x.streamingServerName+a,u.preLoad="none",u.pause(),C=0;else{if(C++,3>C)return;if(C>10)return void(u.src="");null!==u.error||u.networkState==HTMLMediaElement.NETWORK_NO_SOURCE||u.networkState==HTMLMediaElement.NETWORK_EMPTY?c():b()}else u=new Audio(x.streamingServerName+a),u.preLoad="none",u.pause(),C=0}fluidvids.init({selector:["iframe"],players:["www.youtube.com"]});var s=document.getElementById("search");if(null!==s){var t=document.createElement("style");t.setAttribute("id","search_style"),document.head.appendChild(t),s.addEventListener("input",function(){return this.value?void(t.innerHTML='.searchable:not([data-index*="'+this.value.toLowerCase()+'"]) { display: none; }'):void(t.innerHTML="")})}var u,v,w,x={extraTime:{days:0,hours:0,minutes:0},podcastTimeString:"",timeFormatString:"YYYY-MM-DD HH:mm Z",preMoment:{unit:"hours",amount:15},startMoment:{unit:"seconds",amount:15},liveEndMoment:{unit:"minutes",amount:30},stopMoment:{unit:"hours",amount:2},streamingServerName:"http://listen.webuild.sg:8000/",usingiFrameIRC:0},y=null,z=null,A=null,B=null,C=0,D=document.getElementById("liveDiv"),E=new XMLHttpRequest;E.open("GET","/api/v1/podcasts.json",!0),E.responseType="json",E.onload=function(){var b=E.response;"string"==typeof E.response&&(b=JSON.parse(E.response)),x.podcastTimeString=b.meta.next_live_show.start_time,v=moment(x.podcastTimeString,x.timeFormatString),y=v.clone().subtract(x.preMoment.amount,x.preMoment.unit),z=v.clone().subtract(x.startMoment.amount,x.startMoment.unit),A=v.clone().add(x.stopMoment.amount,x.stopMoment.unit),B=v.clone().add(x.liveEndMoment.amount,x.liveEndMoment.unit),a(),setInterval(a,1e3)},E.send(),document.getElementsByTagName("header")[0].addEventListener("click",function(){window.parent.location.href="/"}),window.addEventListener("hashchange",function(){var a,b,c,d=window.location.hash;"#t="==d.substring(0,3)&&(a=d.replace(/#t=/,"").split(":"),b=parseInt(a[a.length-1]),a[a.length-2]&&(b+=60*parseInt(a[a.length-2])),a[a.length-3]&&(b+=60*parseInt(a[a.length-3])*60),c=document.getElementsByTagName("audio")[0],c&&b&&(c.currentTime=b,c.play()))})}();